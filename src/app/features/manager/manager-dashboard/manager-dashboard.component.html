<div class="manager-container min-h-screen bg-gray-50 p-8">
  <!-- Podium overlay -->
  <app-podium
    *ngIf="showPodium()"
    [winners]="currentRoundWinners()"
    [roundNumber]="room()?.currentRound || 0"
    [maxRounds]="room()?.config?.maxRounds || 0"
    [isLastRound]="room()?.state === 'finished'">
  </app-podium>

  <!-- Header -->
  <header class="flex justify-between items-center mb-2 p-2">
    <h1 class="text-2xl font-bold text-gray-800 flex items-center gap-3">
      ğŸ™ï¸ Panel del GritÃ³n
    </h1>
    <button 
      (click)="goHome()"
      class="bg-gray-100 text-gray-700 px-6 py-2 rounded-xl font-semibold hover:bg-gray-200 transition">
      â† Volver
    </button>
  </header>

  <!-- Not authenticated -->
  <div *ngIf="!isAuthenticated()" class="text-center">
    <div class="bg-white rounded-lg p-6 max-w-md mx-auto">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">Inicia sesiÃ³n para crear salas</h2>
      <button 
        (click)="signInWithGoogle()"
        class="bg-indigo-600 text-white px-8 py-3 rounded-2xl font-semibold hover:bg-indigo-700 transition shadow-lg">
        ğŸ” Iniciar sesiÃ³n con Google
      </button>
    </div>
  </div>

  <!-- Authenticated - No room -->
  <div *ngIf="isAuthenticated() && !room()">
    <app-manager-room-list
      [managerRooms]="managerRooms()"
      [loadingRooms]="loadingRooms()"
      [currentUser]="currentUser()"
      (roomSelected)="selectRoom($event)"
      (createRoom)="handleCreateRoom($event)">
    </app-manager-room-list>
  </div>

  <!-- Room active -->
  <div *ngIf="room()">
    <app-manager-game-panel
      [room]="room()!"
      [currentCard]="currentCard()"
      [nextCardPreview]="nextCardPreview()"
      [nextVersoSuggestion]="nextVersoSuggestion()"
      [participants]="participants()"
      [players]="players()"
      [pendingWinners]="pendingWinners()"
      (startRound)="startRound()"
      (nextCard)="nextCard()"
      (copyInviteLink)="copyInviteLink()"
      (showQRCode)="showQRCode()"
      (openInvitePage)="openInvitePage()"
      (showCardHistory)="showCardHistory()"
      (finishRound)="finishRound()"
      (deleteRoom)="deleteRoom()"
      (reviewParticipant)="reviewParticipant($event)"
      (goHome)="goHome()">
    </app-manager-game-panel>
  </div>
</div>

<!-- Modal de revisiÃ³n de tabla -->
<app-manager-review-modal
  [reviewingParticipant]="reviewingParticipant()"
  [isOpen]="isReviewModalOpen()"
  (approveWinner)="approveWinner()"
  (closeModal)="clearReview()">
</app-manager-review-modal>
