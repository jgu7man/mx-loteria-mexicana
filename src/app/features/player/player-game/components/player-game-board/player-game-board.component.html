<div class="relative">
  <!-- DESKTOP LAYOUT (xl) -->
  <div class="hidden xl:grid xl:grid-cols-12 gap-6 pt-0">
    <!-- Left column: Header + Carta Actual + historial -->
    <div class="xl:col-span-3 space-y-4">
      <app-player-room-header
        [room]="room"
        [roomId]="roomId"
        (goHome)="goHome.emit()"
      ></app-player-room-header>

      <app-player-current-card
        [currentCard]="currentCard"
        [size]="'large'"
      ></app-player-current-card>

      <!-- Historial de cartas -->
      <div class="flex gap-3">
        <app-player-card-history
          [historyCards]="historyCards"
          [maxCards]="2"
        ></app-player-card-history>
      </div>
    </div>

    <!-- Center: Tabla -->
    <div class="xl:col-span-6">
      <div id="tabla-desktop" class="rounded-2xl py-0 px-[3.5rem]">
        <app-tabla
          [tablaCards]="myTabla"
          [marks]="myMarks"
          [markerEmoji]="selectedMarker"
          [isInteractive]="true"
          [size]="'large'"
          (cardClicked)="cardClicked.emit($event)"
        >
        </app-tabla>
      </div>
    </div>

    <!-- Right column: Botones de acciÃ³n -->
    <div class="xl:col-span-3 space-y-4">
      <app-player-action-buttons
        [layout]="'vertical'"
        [size]="'large'"
        (shoutLoteria)="shoutLoteria.emit()"
        (changeMarker)="changeMarker.emit()"
        (changeTabla)="changeTabla.emit()"
      >
      </app-player-action-buttons>
    </div>
  </div>

  <!-- TABLET LAYOUT (md) -->
  <div class="hidden md:block xl:hidden">
    <app-player-room-header
      class="mb-3"
      [room]="room"
      [roomId]="roomId"
      (goHome)="goHome.emit()"
    ></app-player-room-header>

    <div class="space-y-4">
      <div class="grid grid-cols-4 gap-4">
        <!-- Tabla (izquierda, 3 columnas) -->
        <div class="col-span-3 bg rounded-2xl">
          <app-tabla
            [tablaCards]="myTabla"
            [marks]="myMarks"
            [markerEmoji]="selectedMarker"
            [isInteractive]="true"
            [size]="'large'"
            (cardClicked)="cardClicked.emit($event)"
          >
          </app-tabla>
        </div>

        <!-- Right side: Carta Actual + historial -->
        <div class="col-span-1 space-y-3 overflow-y-hidden h-[84vw]">
          <div class="bg-blue-100 rounded-2xl p-3 border-4 border-blue-300">
            <app-player-current-card
              [currentCard]="currentCard"
              [size]="'medium'"
            ></app-player-current-card>
          </div>

          <!-- Historial de cartas -->
          <div class="space-y-2">
            <app-player-card-history
              [historyCards]="historyCards"
              [maxCards]="3"
            ></app-player-card-history>
          </div>
        </div>
      </div>

      <!-- Botones -->
      <app-player-action-buttons
        [layout]="'horizontal'"
        [compact]="true"
        (shoutLoteria)="shoutLoteria.emit()"
        (changeMarker)="changeMarker.emit()"
        (changeTabla)="changeTabla.emit()"
      >
      </app-player-action-buttons>
    </div>
  </div>

  <!-- MOBILE LAYOUT (< md) -->
  <div class="md:hidden space-y-4">
    <app-player-room-header
      [room]="room"
      [roomId]="roomId"
      (goHome)="goHome.emit()"
    ></app-player-room-header>

    <!-- Top: Carta Actual + historial placeholders (horizontal) -->
    <div class="grid grid-cols-4 gap-2">
      <div class="col-span-1">
        <app-player-current-card
          [currentCard]="currentCard"
          [size]="'small'"
        ></app-player-current-card>
      </div>

      <!-- Historial de cartas -->
      <div class="col-span-3 flex gap-3 overflow-x-auto pb-2">
        <app-player-card-history
          [historyCards]="historyCards"
          [maxCards]="3"
        ></app-player-card-history>
      </div>
    </div>

    <!-- Tabla -->
    <div class="rounded-2xl">
      <app-tabla
        [tablaCards]="myTabla"
        [marks]="myMarks"
        [markerEmoji]="selectedMarker"
        [isInteractive]="true"
        [size]="'large'"
        (cardClicked)="cardClicked.emit($event)"
      >
      </app-tabla>
    </div>

    <!-- Botones -->
    <app-player-action-buttons
      [layout]="'horizontal'"
      [compact]="true"
      (shoutLoteria)="shoutLoteria.emit()"
      (changeMarker)="changeMarker.emit()"
      (changeTabla)="changeTabla.emit()"
    >
    </app-player-action-buttons>
  </div>
</div>
